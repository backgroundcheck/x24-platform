# X24 Platform Monorepo

Enterprise threat intelligence, sanctions screening, and AML/KYC platform.

## Structure

```
x24-platform-monorepo/
├── x24-portal/           # React 19 + TypeScript threat intelligence dashboard
│   ├── components/       # 26+ dashboard widgets
│   ├── src/lib/          # Gemini AI, threat intel connectors, risk aggregation
│   ├── package.json      # npm 10+, Vite build
│   └── ...
├── opencti/              # OpenCTI docker setup (threat intelligence backbone)
│   ├── docker/           # docker-compose configuration
│   ├── docker-compose.yml
│   └── ...
└── README.md
```

## Quick Start

### X24 Portal (Dashboard)

```bash
cd x24-portal
npm install
npm run dev          # Vite dev server (port 3002)
npm run build        # Production build
npm run test         # Vitest watch mode
```

**Requires**: Node.js 18+, VITE_GEMINI_API_KEY

### OpenCTI (Threat Intelligence Backend)

```bash
cd opencti
docker-compose up -d  # Start all services
# Access at http://localhost:8080 (admin@opencti.io / changeme)
```

## Features

- **26+ Intelligence Widgets**: Asset search, compliance screening, threat actor linking, graph visualization
- **Unified Risk Scoring**: Sanctions + PEP + Criminal + FTM + Threat Actor (0–100 scale)
- **Fuzzy Matching**: 7-dimension sanctions scoring (name, alias, country, DOB, identifier, context)
- **Multi-List Support**: OFAC SDN/Non-SDN, UN, EU, UK, local sanctions lists
- **Follow-the-Money**: Ownership chains, crypto wallets, shell company indicators
- **OpenCTI Integration**: Graph database, relationship mapping, analyst workflows

## Architecture

### Frontend (X24 Portal)
- **Framework**: React 19 + TypeScript + Vite
- **State**: Client-side (localStorage fallback)
- **AI**: Google Gemini 2.5 (JSON + grounded search)
- **Connectors**: 20+ threat intel APIs with mock fallbacks

### Backend (OpenCTI)
- **Core**: GraphQL API, PostgreSQL, Elasticsearch
- **Storage**: MinIO S3, RabbitMQ queues
- **Connectors**: 20+ automated threat feeds
- **Workers**: 3 parallel processing instances

## Development

### Coding Standards
- All data structures in `schemas.ts` (Zod)
- All AI calls via `gemini.ts` wrappers (retry + validation)
- All widgets implement `BaseWidgetProps` interface
- Error handling via `errorHandling.ts` (classify + retry + recovery)
- Tracing via OpenTelemetry (`tracing.ts`)

### Testing
```bash
cd x24-portal
npm run test -- <file>  # Single file
npm run test:coverage   # With coverage
```

## Environment Variables

### X24 Portal (.env)
```
VITE_GEMINI_API_KEY=<Google Gemini API key>
VITE_API_KEY=<Fallback API key>
X24_VIRUSTOTAL_KEY=<VirusTotal API key>
X24_SHODAN_KEY=<Shodan API key>
X24_OPENCTI_URL=http://localhost:8080
X24_OPENCTI_KEY=<OpenCTI API token>
VITE_TRACING_ENABLED=true
```

### OpenCTI (.env in docker/)
```
OPENCTI_ADMIN_EMAIL=admin@opencti.io
OPENCTI_ADMIN_PASSWORD=changeme
OPENCTI_ADMIN_TOKEN=<auto-generated>
PGSQL_PASSWORD=<secure password>
RABBITMQ_DEFAULT_USER=guest
RABBITMQ_DEFAULT_PASS=guest
```

## Documentation

- **SANCTIONS_FUZZY_MATCHING_RUBRIC.md** — Exact scoring methodology (locked)
- **ENTITY_PROFILE_HEADER_UI_CONTRACT.md** — UI data contract (locked)
- **PHASE_1_IMPLEMENTATION_ROADMAP.md** — Week-by-week schedule
- **SESSION_COMPLETE_INDEX.md** — Navigation guide for all docs

## Status

- ✅ Build: 7.55s, 2,898 modules, 0 errors
- ✅ Code: 2,315+ LOC (production-ready)
- ✅ Tests: 40+ test cases (fuzzy matching validator)
- ✅ OpenCTI: Running (26 services, all healthy)
- ✅ Deployed analysts: Using threat intelligence, generating cases

## Team

- **X24 Master Orchestrator** — Platform architecture, specification locking
- **X24 OSINT Architect** — Threat intelligence data flows
- **X24 Sanctions & PEP Architect** — Compliance screening rules
- **Engineers** — Implementation (Phase 1: Sanctions; Phase 2: FTM; Phase 3: Header)
- **QA** — Accuracy validation, performance testing
- **Compliance/Legal** — Audit logging, regulatory review

## License

Proprietary — X24 Intelligence Platform

## Support

For issues, questions, or feature requests, contact: platform@x24.io
